#!/usr/bin/perl

package Reactant::ResetPassword;

use Moose;

with 'MooseX::Getopt';

has 'username' => ( is => 'ro', isa => 'Str', required => 1,
	cmd_aliases => [ 'user', 'u' ],
);
has 'password' => ( is => 'ro', isa => 'Str', required => 1, 
	cmd_aliases => [ 'pass', 'p' ],
);

1;


package main;

use strict;
use warnings;

# Local modules
use lib 'lib/';
use Reactant::Schema;

my $opts = Reactant::ResetPassword->new_with_options();

my $schema = Reactant::Schema->connect(
	'dbi:mysql:reactant',
	'react',
	'ant',
);

my $user = $schema->resultset('User')->find({ username => $opts->username });

die "User not found" unless $user;

$user->password( $opts->password );
$user->update;

